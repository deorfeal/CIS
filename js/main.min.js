$((function(){/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?($(document).on("click",(function(e){$(e.target).closest(".lang").length?$(e.target).closest(".lang").toggleClass("lang--active"):$(".lang").removeClass("lang--active")})),$(document).on("click",(function(e){$(e.target).closest(".dropdown").length?$(e.target).closest(".dropdown").toggleClass("dropdown--active"):$(".dropdown").removeClass("dropdown--active")}))):($(".lang").on("mouseover",(function(){$(this).addClass("lang--active")})),$(".lang").on("mouseout",(function(){$(this).removeClass("lang--active")})),$(".dropdown").on("mouseover",(function(){$(this).addClass("dropdown--active")})),$(".dropdown").on("mouseout",(function(){$(this).removeClass("dropdown--active")})))})),$((function(){}));const swiper=new Swiper(".heading-swiper",{slidesPerView:1,direction:"vertical",speed:750,allowTouchMove:!1,navigation:{prevEl:".arrow--prev",nextEl:".arrow--next"},pagination:{el:".pagination",type:"fraction",formatFractionCurrent:function(e){return e<10?"0"+e:e},formatFractionTotal:function(e){return e<10?"0"+e:e}}});let isScrollingBlocked=!0,scrollTimeout=null,lastScrollTime=0;const scrollDelay=100;let savedScrollPosition=0,touchStartY=0,touchEndY=0,isTouching=!1,touchStartTime=0,isTransitioning=!1;const minSwipeDistance=50,maxSwipeTime=500,isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||"ontouchstart"in window||navigator.maxTouchPoints>0;function blockPageScroll(){savedScrollPosition=window.pageYOffset||document.documentElement.scrollTop,document.body.style.position="fixed",document.body.style.top=`-${savedScrollPosition}px`,document.body.style.width="100%",document.body.style.overflow="hidden",isScrollingBlocked=!0,document.body.classList.add("slider-mode")}function unblockPageScroll(){document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,savedScrollPosition),isScrollingBlocked=!1,document.body.classList.remove("slider-mode")}function transitionToPageScroll(){isTransitioning||(isTransitioning=!0,unblockPageScroll(),setTimeout(()=>{const e=window.pageYOffset||document.documentElement.scrollTop,o=isMobile?150:100;window.scrollTo({top:e+o,behavior:"smooth"}),setTimeout(()=>{isTransitioning=!1},500)},50))}function handleSwipe(e,o,n){if(isTransitioning)return;const i=swiper.activeIndex,t=swiper.slides.length;o<50||n>500||(isScrollingBlocked?"up"===e?i<t-1?swiper.slideNext():transitionToPageScroll():"down"===e&&i>0&&swiper.slidePrev():"down"===e&&window.scrollY<=50&&(blockPageScroll(),swiper.slideTo(t-1,0)))}function handleWheelEvent(e){if(isTransitioning)return void e.preventDefault();const o=Date.now();if(o-lastScrollTime<100)return void(isScrollingBlocked&&e.preventDefault());lastScrollTime=o;const n=e.deltaY,i=swiper.activeIndex,t=swiper.slides.length;scrollTimeout&&clearTimeout(scrollTimeout),isScrollingBlocked?(e.preventDefault(),n>0?i<t-1?swiper.slideNext():transitionToPageScroll():n<0&&i>0&&swiper.slidePrev()):n<0&&window.scrollY<=50&&(e.preventDefault(),blockPageScroll(),swiper.slideTo(t-1,0))}function handleTouchStart(e){if(!isMobile||isTransitioning)return;const o=e.touches[0];touchStartY=o.clientY,touchStartTime=Date.now(),isTouching=!0,isScrollingBlocked&&e.preventDefault()}function handleTouchMove(e){isMobile&&isTouching&&!isTransitioning&&isScrollingBlocked&&e.preventDefault()}function handleTouchEnd(e){if(!isMobile||!isTouching||isTransitioning)return;const o=e.changedTouches[0];touchEndY=o.clientY;const n=Date.now()-touchStartTime,i=Math.abs(touchEndY-touchStartY);if(isTouching=!1,i>50&&n<=500){handleSwipe(touchEndY<touchStartY?"up":"down",i,n)}}function handlePageScroll(){isScrollingBlocked||isTransitioning||(savedScrollPosition=window.pageYOffset||document.documentElement.scrollTop)}isMobile?(document.addEventListener("touchstart",handleTouchStart,{passive:!1}),document.addEventListener("touchmove",handleTouchMove,{passive:!1}),document.addEventListener("touchend",handleTouchEnd,{passive:!1})):window.addEventListener("wheel",handleWheelEvent,{passive:!1}),window.addEventListener("scroll",handlePageScroll,{passive:!0}),swiper.on("slideChange",(function(){isScrollingBlocked||isTransitioning||blockPageScroll()})),document.addEventListener("DOMContentLoaded",(function(){blockPageScroll(),window.scrollTo(0,0),savedScrollPosition=0})),window.addEventListener("orientationchange",(function(){setTimeout(()=>{swiper.update(),isScrollingBlocked&&(window.scrollTo(0,0),savedScrollPosition=0)},200)})),document.addEventListener("touchmove",(function(e){isScrollingBlocked&&e.preventDefault()}),{passive:!1}),window.swiperScrollControl={enableSliderMode:function(){isTransitioning||(blockPageScroll(),swiper.slideTo(0))},enablePageScrollMode:function(){isTransitioning||unblockPageScroll()},getCurrentMode:function(){return isScrollingBlocked?"slider":"page"},isTransitioning:function(){return isTransitioning},isMobileDevice:function(){return isMobile},getSavedScrollPosition:function(){return savedScrollPosition}},window.addEventListener("beforeunload",(function(){isScrollingBlocked&&unblockPageScroll()}));const additionalStyles="\n  <style>\n    /* Предотвращаем bounce эффект и улучшаем производительность */\n    body {\n      overscroll-behavior: none;\n      -webkit-overflow-scrolling: touch;\n    }\n    \n    body.slider-mode {\n      touch-action: none;\n      -webkit-touch-callout: none;\n      -webkit-user-select: none;\n      user-select: none;\n    }\n    \n    .heading-swiper {\n      touch-action: none;\n      position: relative;\n      z-index: 10;\n    }\n    \n    /* Предотвращаем скачки при блокировке скролла */\n    html {\n      scroll-behavior: auto !important;\n    }\n    \n    /* Дополнительные стили для мобильных */\n    @media (max-width: 768px) {\n      body.slider-mode {\n        position: fixed !important;\n        width: 100% !important;\n        height: 100% !important;\n      }\n    }\n  </style>\n";if(!document.querySelector("#swiper-scroll-styles")){const e=document.createElement("div");e.id="swiper-scroll-styles",e.innerHTML=additionalStyles,document.head.appendChild(e)}new Swiper(".gallery-swiper",{slidesPerView:1,speed:750,spaceBetween:30,navigation:{prevEl:".arrow--prev",nextEl:".arrow--next"}}),new Swiper(".videos-swiper",{slidesPerView:2,speed:750,spaceBetween:30,navigation:{prevEl:".arrow--prev",nextEl:".arrow--next"}}),new Swiper(".recalls-swiper",{slidesPerView:4,speed:750,spaceBetween:10,loop:!0,breakpoints:{301:{slidesPerView:2,speed:750,spaceBetween:10,loop:!0},541:{slidesPerView:3,speed:750,spaceBetween:10,loop:!0},993:{slidesPerView:2,speed:750,spaceBetween:10,loop:!0},1201:{slidesPerView:3,speed:750,spaceBetween:10,loop:!0},1491:{slidesPerView:4,speed:750,spaceBetween:10,loop:!0}}});