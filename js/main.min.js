$((function(){/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?($(document).on("click",(function(e){$(e.target).closest(".lang").length?$(e.target).closest(".lang").toggleClass("lang--active"):$(".lang").removeClass("lang--active")})),$(document).on("click",(function(e){$(e.target).closest(".dropdown").length?$(e.target).closest(".dropdown").toggleClass("dropdown--active"):$(".dropdown").removeClass("dropdown--active")}))):($(".lang").on("mouseover",(function(){$(this).addClass("lang--active")})),$(".lang").on("mouseout",(function(){$(this).removeClass("lang--active")})),$(".dropdown").on("mouseover",(function(){$(this).addClass("dropdown--active")})),$(".dropdown").on("mouseout",(function(){$(this).removeClass("dropdown--active")})))})),$((function(){}));const swiper=new Swiper(".heading-swiper",{slidesPerView:1,direction:"vertical",speed:750,allowTouchMove:!1,navigation:{prevEl:".arrow--prev",nextEl:".arrow--next"},pagination:{el:".pagination",type:"fraction",formatFractionCurrent:function(e){return e<10?"0"+e:e},formatFractionTotal:function(e){return e<10?"0"+e:e}}});let isScrollingBlocked=!0,scrollTimeout=null,lastScrollTime=0;const scrollDelay=100;let savedScrollPosition=0,touchStartY=0,touchEndY=0,isTouching=!1,touchStartTime=0;const minSwipeDistance=50,maxSwipeTime=500,isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||"ontouchstart"in window||navigator.maxTouchPoints>0;function blockPageScroll(){savedScrollPosition=window.pageYOffset||document.documentElement.scrollTop,document.body.style.position="fixed",document.body.style.top=`-${savedScrollPosition}px`,document.body.style.width="100%",document.body.style.overflow="hidden",isScrollingBlocked=!0}function unblockPageScroll(){document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,savedScrollPosition),isScrollingBlocked=!1}function transitionToPageScroll(){unblockPageScroll(),setTimeout(()=>{const e=window.pageYOffset||document.documentElement.scrollTop;window.scrollTo({top:e+50,behavior:"smooth"})},50)}function handleSwipe(e,o,n){const t=swiper.activeIndex,i=swiper.slides.length;o<50||n>500||(isScrollingBlocked?"up"===e?t<i-1?swiper.slideNext():transitionToPageScroll():"down"===e&&t>0&&swiper.slidePrev():"down"===e&&window.scrollY<=10&&(blockPageScroll(),swiper.slideTo(i-1,0)))}function handleWheelEvent(e){const o=Date.now();if(o-lastScrollTime<100)return void(isScrollingBlocked&&e.preventDefault());lastScrollTime=o;const n=e.deltaY,t=swiper.activeIndex,i=swiper.slides.length;scrollTimeout&&clearTimeout(scrollTimeout),isScrollingBlocked?(e.preventDefault(),n>0?t<i-1?swiper.slideNext():transitionToPageScroll():n<0&&t>0&&swiper.slidePrev()):n<0&&window.scrollY<=10&&(e.preventDefault(),blockPageScroll(),swiper.slideTo(i-1,0))}function handleTouchStart(e){isMobile&&(touchStartY=e.touches[0].clientY,touchStartTime=Date.now(),isTouching=!0,isScrollingBlocked&&e.preventDefault())}function handleTouchMove(e){isMobile&&isTouching&&isScrollingBlocked&&e.preventDefault()}function handleTouchEnd(e){if(!isMobile||!isTouching)return;touchEndY=e.changedTouches[0].clientY;const o=Date.now()-touchStartTime,n=Math.abs(touchEndY-touchStartY);if(isTouching=!1,n>50){handleSwipe(touchEndY<touchStartY?"up":"down",n,o)}}function handlePageScroll(){isScrollingBlocked||(savedScrollPosition=window.pageYOffset||document.documentElement.scrollTop)}if(isMobile){const e=document.querySelector(".heading-swiper");e&&(e.addEventListener("touchstart",handleTouchStart,{passive:!1}),e.addEventListener("touchmove",handleTouchMove,{passive:!1}),e.addEventListener("touchend",handleTouchEnd,{passive:!1})),document.body.addEventListener("touchstart",handleTouchStart,{passive:!1}),document.body.addEventListener("touchmove",handleTouchMove,{passive:!1}),document.body.addEventListener("touchend",handleTouchEnd,{passive:!1})}else window.addEventListener("wheel",handleWheelEvent,{passive:!1});window.addEventListener("scroll",handlePageScroll,{passive:!0}),swiper.on("slideChange",(function(){isScrollingBlocked||blockPageScroll()})),document.addEventListener("DOMContentLoaded",(function(){blockPageScroll(),window.scrollTo(0,0),savedScrollPosition=0})),window.addEventListener("orientationchange",(function(){setTimeout(()=>{swiper.update(),isScrollingBlocked&&(window.scrollTo(0,0),savedScrollPosition=0)},100)})),document.addEventListener("touchmove",(function(e){isScrollingBlocked&&e.preventDefault()}),{passive:!1}),window.swiperScrollControl={enableSliderMode:function(){blockPageScroll(),swiper.slideTo(0)},enablePageScrollMode:function(){unblockPageScroll()},getCurrentMode:function(){return isScrollingBlocked?"slider":"page"},isMobileDevice:function(){return isMobile},getSavedScrollPosition:function(){return savedScrollPosition}},window.addEventListener("beforeunload",(function(){isScrollingBlocked&&unblockPageScroll()}));const additionalStyles="\n  <style>\n    /* Убираем bounce эффект на мобильных */\n    body {\n      overscroll-behavior: none;\n    }\n    \n    .heading-swiper {\n      touch-action: none;\n    }\n    \n    /* Предотвращаем скачки при блокировке скролла */\n    html {\n      scroll-behavior: auto !important;\n    }\n  </style>\n";if(!document.querySelector("#swiper-scroll-styles")){const e=document.createElement("div");e.id="swiper-scroll-styles",e.innerHTML=additionalStyles,document.head.appendChild(e)}new Swiper(".gallery-swiper",{slidesPerView:1,speed:750,spaceBetween:30,navigation:{prevEl:".arrow--prev",nextEl:".arrow--next"}}),new Swiper(".videos-swiper",{slidesPerView:2,speed:750,spaceBetween:30,navigation:{prevEl:".arrow--prev",nextEl:".arrow--next"}}),new Swiper(".recalls-swiper",{slidesPerView:4,speed:750,spaceBetween:10,loop:!0,breakpoints:{301:{slidesPerView:2,speed:750,spaceBetween:10,loop:!0},541:{slidesPerView:3,speed:750,spaceBetween:10,loop:!0},993:{slidesPerView:2,speed:750,spaceBetween:10,loop:!0},1201:{slidesPerView:3,speed:750,spaceBetween:10,loop:!0},1491:{slidesPerView:4,speed:750,spaceBetween:10,loop:!0}}});